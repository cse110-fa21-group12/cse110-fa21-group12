const deleteButton = document.getElementsByClassName("crud")[3];
deleteButton.addEventListener("click", function () {
  const a = localStorage.getItem("id");
  console.log(a),
    fetch("/recipes/" + a, {
      method: "DELETE",
      headers: {
        "Content-Type": "application/json",
        "Access-Control-Allow-Origin": "*",
        "Access-Control-Allow-Headers": "Content-Type",
        "Access-Control-Allow-Methods": "GET,POST,OPTIONS,DELETE,PUT,PATCH",
      },
    }).catch((a) => {
      console.error("Error:", a);
    });
});
const editButton = document.getElementById("edit-button");
editButton.addEventListener("click", function () {
  window.location = "edit-recipe.html";
});
const url = localStorage.getItem("id");
console.log(url),
  fetch("/recipes/" + url, {
    method: "GET",
    headers: {
      "Content-Type": "application/json",
      "Access-Control-Allow-Origin": "*",
      "Access-Control-Allow-Headers": "Content-Type",
      "Access-Control-Allow-Methods": "GET,POST,OPTIONS,DELETE,PUT,PATCH",
    },
  })
    .then((a) => a.json())
    .then((a) => {
      console.log("Success:", a);
      const b = document.getElementsByClassName("recipe-title")[0];
      b.innerHTML = a.title;
      const c = document.getElementsByClassName("thumbnail")[0];
      c.setAttribute("src", a.img);
      const d = document.getElementsByClassName("description")[0];
      d.innerHTML = a.description;
      const e = document.getElementById("prep-time");
      e.innerHTML = "Preparation Time: " + a.preparationTime;
      const f = document.getElementById("cook-time");
      f.innerHTML = "Cook Time: " + a.cookingTime;
      const g = document.getElementById("total-time");
      g.innerHTML = "Total Time: " + a.totalTime;
      const h = document.getElementById("ingredientsBox");
      for (let b = 0; b < a.ingredients.length; b++) {
        const c = document.createElement("input");
        c.setAttribute("type", "checkbox"),
          c.setAttribute("id", a.ingredients[b]),
          c.setAttribute("name", "i");
        const d = document.createElement("label");
        d.setAttribute("class", "checklist"),
          d.setAttribute("for", "i"),
          (d.innerHTML = a.ingredients[b]);
        const e = document.createElement("br");
        h.appendChild(c), h.appendChild(d), h.appendChild(e);
      }
      const i = document.getElementById("directions");
      for (let b = 1; b < a.directions.length + 1; b++) {
        const c = document.createElement("div");
        c.setAttribute("class", "step");
        const d = document.createElement("h3");
        d.innerHTML = "Step " + b;
        const e = document.createElement("i");
        e.setAttribute("class", "fas fa-utensils"), d.appendChild(e);
        const f = document.createElement("p");
        (f.innerHTML = a.directions[b - 1]),
          c.appendChild(d),
          c.appendChild(f),
          i.appendChild(c);
      }
    })
    .catch((a) => {
      console.error("Error:", a);
    });
