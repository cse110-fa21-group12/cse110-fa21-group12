async function randomRecipe() {
  for (let a = 0; 50 > a; a++)
    try {
      let a = {};
      fetch(
        "https://api.spoonacular.com/recipes/random?apiKey=dcbc0b69649b45209cb13948ce64a893"
      )
        .then((a) => a.json())
        .then((b) => {
          let {
            title: c,
            summary: d,
            dishTypes: e,
            diets: f,
            readyInMinutes: g,
            analyzedInstructions: h,
            extendedIngredients: i,
            image: j,
          } = b.recipes[0];
          e = e || "";
          const k = e.concat(f);
          g =
            60 <= g
              ? 1 == parseInt(g / 60)
                ? `${parseInt(g / 60)} hour and ${g % 60} minutes`
                : `${parseInt(g / 60)} hours and ${g % 60} minutes`
              : `${g} minutes`;
          const l = h[0].steps.map((a) => a.step),
            m = i.map((a) => {
              const { amount: b, unit: c, name: d } = a;
              return `${b} ${c} ${d}`;
            });
          (a = {
            id: c,
            title: c,
            description: d,
            categories: e,
            tags: k,
            preparationTime: g,
            cookingTime: g,
            ingredients: m,
            directions: l,
            img: j,
          }),
            console.log(a),
            console.log(JSON.stringify(a)),
            fetch("/recipes/create", {
              method: "PUT",
              headers: {
                "Content-Type": "application/json",
                "Access-Control-Allow-Origin": "*",
                "Access-Control-Allow-Headers": "Content-Type",
                "Access-Control-Allow-Methods":
                  "GET,POST,OPTIONS,DELETE,PUT,PATCH",
              },
              body: JSON.stringify(a),
            })
              .then((a) => a.json())
              .then((a) => {
                console.log("Success:", a);
              })
              .catch((a) => {
                console.error("Error:", a);
              });
        });
    } catch (a) {
      console.error(a);
    }
}
const button = document.querySelector("button");
button.addEventListener("click", () => {
  randomRecipe();
});
