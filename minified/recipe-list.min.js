let user;function displayRecipes(a){for(let b=0;b<a.length;b++)if(a[b].creator==user){const c=document.getElementsByClassName("recipe-list")[0],d=document.createElement("div");d.setAttribute("class","recipe"),d.setAttribute("id",a[b].title),d.href="recipe.html",d.addEventListener("click",function(){localStorage.setItem("id",a[b].title),window.location="recipe.html"});const e=document.createElement("img");e.setAttribute("src",a[b].img),d.appendChild(e);const f=document.createElement("p");f.setAttribute("class","recipes-title"),f.innerHTML=a[b].title,d.appendChild(f);const g=document.createElement("p");g.setAttribute("class","recipe-time"),g.innerHTML="<i class=\"fas fa-clock\">  "+a[b].totalTime,d.appendChild(g);const h=document.createElement("p");h.setAttribute("class","recipe-time"),h.innerHTML="5",d.appendChild(h),c.appendChild(d)}}fetch("/user",{method:"GET",headers:{"Content-Type":"application/json"}}).then(a=>a.json()).then(a=>{console.log("Success:",a),user=a.email});function removeRecipes(){for(const a=document.getElementsByClassName("recipe-list")[0];a.hasChildNodes();)a.removeChild(a.firstChild)}function search(){const a=document.querySelector(".search").value;a&&0<a.trim().length?(console.log(a),removeRecipes(),fetch("/search/"+a,{method:"GET",headers:{"Content-Type":"application/json"}}).then(a=>a.json()).then(a=>{console.log("Success:",a),displayRecipes(a)})):alert("Please enter a recipe to search!")}const searchButton=document.getElementsByClassName("fa fa-search")[0],searchText=document.getElementsByClassName("search")[0];searchText.addEventListener("keypress",function(a){"Enter"==a.key&&search()}),searchButton.addEventListener("click",function(){search()}),fetch("/recipes/",{method:"GET",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Content-Type","Access-Control-Allow-Methods":"GET,POST,OPTIONS,DELETE,PUT,PATCH"}}).then(a=>a.json()).then(a=>{console.log("Success:",a),displayRecipes(a)}).catch(a=>{console.error("Error:",a)});