const addIngredientButton=document.getElementById("add-shopping-button"),ingredientForm=document.getElementById("shopping-form");populateList();function populateList(){fetch("/shopping-list",{method:"GET",headers:{"Content-Type":"application/json"}}).then(a=>a.json()).then(a=>{for(console.log("Success:",a);ingredientForm.hasChildNodes();)ingredientForm.removeChild(ingredientForm.lastChild);let b,c;for(let d=0;d<a.length;d++)c=document.createElement("label"),b=document.createElement("input"),b.setAttribute("type","checkbox"),b.setAttribute("id",a[d].name),b.setAttribute("value",a[d].quantity),c.appendChild(b),c.appendChild(document.createTextNode(a[d].quantity+" "+a[d].name)),ingredientForm.appendChild(c),ingredientForm.append(document.createElement("br"))})}addIngredientButton.addEventListener("click",function(){const a=document.getElementById("ingredient"),b=document.getElementById("ingredient-quantity"),c=a.value,d=b.value;fetch("/shopping-list",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:c,quantity:d})}).then(a=>a.json()).then(a=>{console.log("Success:",a),location.href="shopping-list.html",populateList()}).catch(a=>{console.error("Error:",a)})});const doneButton=document.getElementById("done-button");doneButton.addEventListener("click",function(){let a=document.getElementById("shopping-form"),b=a.getElementsByTagName("input");console.log(b);let c,d=b.length;for(let a=0;a<d;a++)"checkbox"==b[a].type&&(b[a].checked&&(console.log("in"),c={name:b[a].id,quantity:b[a].value}),fetch("/shopping-list",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}).then(a=>a.json()).then(a=>{console.log("Success:",a)}).catch(a=>{console.error("Error:",a)}),location.href="shopping-list.html");populateList()});