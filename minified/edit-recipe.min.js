const id=localStorage.getItem("id");fetch("/recipes/"+id,{method:"GET",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Content-Type","Access-Control-Allow-Methods":"GET,POST,OPTIONS,DELETE,PUT,PATCH"}}).then(a=>a.json()).then(a=>{console.log("Success:",a);const b=document.getElementById("title");b.defaultValue=a.title;const c=document.getElementById("description");c.defaultValue=a.description;const d=document.getElementById("categories");d.defaultValue=a.categories;const e=document.getElementById("tags");e.defaultValue=a.tags;const f=document.getElementById("prep-time");f.defaultValue=a.preparationTime;const g=document.getElementById("cook-time");g.defaultValue=a.cookingTime;const h=document.getElementById("total-time");h.defaultValue=a.totalTime;const j=document.getElementById("ingredients-form");for(let b=0;b<a.ingredients.length;b++){const c=document.createElement("input"),d=document.createElement("input");c.defaultValue=a.ingredients[b],c.setAttribute("class","ingredient"),d.setAttribute("id","quantity"),d.placeholder="Amount",j.appendChild(d),j.appendChild(c),j.appendChild(document.createElement("br"))}const k=document.getElementById("enter-directions");for(let b=0;b<a.directions.length;b++){const c=document.createElement("input");c.defaultValue=a.directions[b],c.setAttribute("class","directions"),k.appendChild(document.createElement("br")),k.appendChild(c),k.appendChild(document.createElement("br"))}});const addIngredientButton=document.getElementById("add-ingredient-button"),ingredientsForm=document.getElementById("ingredients-form");addIngredientButton.addEventListener("click",function(){const a=document.createElement("input"),b=document.createElement("input");a.placeholder="Ingredient Name",a.setAttribute("class","ingredient"),b.setAttribute("id","quantity"),b.placeholder="Amount",ingredientsForm.appendChild(b),ingredientsForm.appendChild(a),ingredientsForm.appendChild(document.createElement("br"))});const addDirectionsButton=document.getElementById("add-directions-button"),directionsForm=document.getElementById("enter-directions");let j=0;addDirectionsButton.addEventListener("click",function(){const a=document.createElement("input");a.placeholder="New Step",j++,a.setAttribute("class","directions"),directionsForm.appendChild(document.createElement("br")),directionsForm.appendChild(a),directionsForm.appendChild(document.createElement("br"))});const saveRecipeButton=document.getElementById("save-recipe");saveRecipeButton.addEventListener("click",()=>{const a=document.getElementById("title").value,b=document.getElementById("description").value,c=document.getElementById("categories").value,d=document.getElementById("tags").value,e=document.getElementById("prep-time").value,f=document.getElementById("cook-time").value,g=document.getElementById("total-time").value,h=document.getElementsByClassName("ingredient"),j=[];for(let a=0;a<h.length;a++)j[a]=h[a].value;const k=document.getElementsByClassName("directions"),l=[];for(let a=0;a<k.length;a++)l[a]=k[a].value;fetch("/recipes/edit",{method:"PUT",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Headers":"Content-Type","Access-Control-Allow-Methods":"GET,POST,OPTIONS,DELETE,PUT,PATCH"},body:JSON.stringify({id:a,title:a,description:b,categories:c,tags:d,preparationTime:e,cookingTime:f,ingredients:j,directions:l})}).then(a=>a.json()).then(a=>{console.log("Success:",a)}).catch(a=>{console.error("Error:",a)}),setTimeout(1e3),location.href="recipe-list.html"});