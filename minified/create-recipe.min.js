const addIngredientButton = document.getElementById("add-ingredient-button"),
  ingredientForm = document.getElementById("ingredients-form");
addIngredientButton.addEventListener("click", function () {
  const a = document.createElement("input"),
    b = document.createElement("input");
  (a.placeholder = "Ingredient Name"),
    a.setAttribute("class", "ingredient"),
    b.setAttribute("id", "quantity"),
    (b.placeholder = "Amount"),
    ingredientForm.appendChild(b),
    ingredientForm.appendChild(a),
    ingredientForm.appendChild(document.createElement("br"));
}),
  addIngredientButton.click();
const addDirectionsButton = document.getElementById("add-directions-button"),
  directionsForm = document.getElementById("enter-directions");
var i = 1;
addDirectionsButton.addEventListener("click", function () {
  const a = document.createElement("input");
  (a.placeholder = "Step " + i),
    i++,
    a.setAttribute("class", "directions"),
    directionsForm.appendChild(document.createElement("br")),
    directionsForm.appendChild(a),
    directionsForm.appendChild(document.createElement("br"));
}),
  addDirectionsButton.click();
const saveRecipeButton = document.getElementById("save-recipe");
saveRecipeButton.addEventListener("click", () => {
  const a = document.getElementById("title").value,
    b = document.getElementById("description").value,
    c = document.getElementById("categories").value,
    d = document.getElementById("tags").value,
    e = document.getElementById("prep-time").value,
    f = document.getElementById("cook-time").value,
    g = document.getElementById("total-time").value,
    h = document.getElementsByClassName("ingredient"),
    j = [];
  for (let a = 0; a < h.length; a++) j[a] = h[a].value;
  const k = document.getElementsByClassName("directions"),
    l = [];
  for (let a = 0; a < k.length; a++) l[a] = k[a].value;
  fetch("/recipes/create", {
    method: "PUT",
    headers: {
      "Content-Type": "application/json",
      "Access-Control-Allow-Origin": "*",
      "Access-Control-Allow-Headers": "Content-Type",
      "Access-Control-Allow-Methods": "GET,POST,OPTIONS,DELETE,PUT,PATCH",
    },
    body: JSON.stringify({
      id: a,
      title: a,
      description: b,
      categories: c,
      tags: d,
      preparationTime: e,
      cookingTime: f,
      ingredients: j,
      directions: l,
    }),
  })
    .then((a) => a.json())
    .then((a) => {
      console.log("Success:", a);
    })
    .catch((a) => {
      console.error("Error:", a);
    }),
    setTimeout(1e3),
    (location.href = "recipe-list.html");
});
